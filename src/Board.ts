const map = [
    [1, 1, 1, 1, 1, 1, 1, 1, 1],
    [1, 0, 0, 0, 0, 0, 0, 0, 1],
    [1, 0, 0, 0, 0, 0, 0, 0, 1],
    [1, 0, 0, 0, 0, 0, 0, 0, 1],
    [1, 0, 0, 0, 0, 0, 0, 0, 1],
    [1, 0, 0, 0, 0, 0, 0, 0, 1],
    [1, 1, 1, 1, 1, 1, 1, 1, 1],
];
export const  points = [
    // [24,24],
    {coords: [24, 48], type: 'point'},
    {coords: [24, 72], type: 'point'},
    {coords: [24, 96], type: 'point'},
    {coords: [24, 116], type: 'point'},
    {coords: [24, 136], type: 'point'},
    {coords: [48, 24], type: 'point'},
    {coords: [72, 24], type: 'point'},
    {coords: [96, 24], type: 'point'},
    {coords: [120, 24], type: 'point'},
    {coords: [144, 24], type: 'point'},
    {coords: [168, 24], type: 'point'},
    {coords: [192, 24], type: 'point'},
    {coords: [64, 88], type: 'point'},
    {coords: [100, 48], type: 'point'},
    {coords: [100, 88], type: 'point'},
    {coords: [64, 140], type: 'point'},
    {coords: [100, 140], type: 'point'},
    {coords: [140, 88], type: 'point'},
    {coords: [164, 88], type: 'point'},
    {coords: [188, 88], type: 'point'},
    {coords: [212, 88], type: 'point'},
    {coords: [236, 88], type: 'point'},
    {coords: [260, 88], type: 'point'},
    {coords: [284, 88], type: 'point'},
    {coords: [308, 88], type: 'point'},
    {coords: [332, 88], type: 'point'},
    {coords: [356, 88], type: 'point'},
    {coords: [380, 88], type: 'point'},
    {coords: [404, 88], type: 'point'},
    {coords: [424, 88], type: 'point'},
    {coords: [100, 164], type: 'point'},
    {coords: [100, 188], type: 'point'},
    {coords: [100, 212], type: 'point'},
    {coords: [100, 236], type: 'point'},
    {coords: [100, 260], type: 'point'},
    {coords: [100, 284], type: 'point'},
    {coords: [100, 308], type: 'point'},
    {coords: [100, 332], type: 'point'},
    {coords: [100, 356], type: 'point'},
    {coords: [100, 380], type: 'point'},
    {coords: [100, 404], type: 'point'},
    {coords: [100, 424], type: 'point'},
    {coords: [72, 328], type: 'point'},
    {coords: [48, 328], type: 'point'},
    {coords: [24, 328], type: 'point'},
    {coords: [24, 352], type: 'point'},
    {coords: [24, 376], type: 'point'},
    {coords: [56, 376], type: 'point'},
    {coords: [56, 400], type: 'point'},
    {coords: [56, 424], type: 'point'},
    {coords: [80, 424], type: 'point'},
    {coords: [24, 424], type: 'point'},
    {coords: [24, 448], type: 'point'},
    {coords: [24, 472], type: 'point'},
    {coords: [48, 472], type: 'point'},
    {coords: [72, 472], type: 'point'},
    {coords: [96, 472], type: 'point'},
    {coords: [120, 472], type: 'point'},
    {coords: [144, 472], type: 'bigPoint'},
    {coords: [168, 472], type: 'point'},
    {coords: [192, 472], type: 'point'},
    {coords: [216, 472], type: 'point'},
    {coords: [240, 472], type: 'point'},
    {coords: [264, 472], type: 'point'},
    {coords: [288, 472], type: 'point'},
    {coords: [312, 472], type: 'point'},
    {coords: [336, 472], type: 'point'},
    {coords: [360, 472], type: 'point'},
    {coords: [384, 472], type: 'point'},
    {coords: [408, 472], type: 'point'},
    {coords: [428, 472], type: 'point'},
    {coords: [428, 448], type: 'point'},
    {coords: [428, 424], type: 'point'},
    {coords: [408, 424], type: 'point'},
    {coords: [384, 424], type: 'point'},
    {coords: [360, 424], type: 'bigPoint'},
    {coords: [396, 396], type: 'point'},
    {coords: [396, 372], type: 'point'},
    {coords: [424, 372], type: 'point'},
    {coords: [424, 332], type: 'point'},
    {coords: [344, 112], type: 'point'},
    {coords: [344, 136], type: 'point'},
    {coords: [344, 160], type: 'point'},
    {coords: [344, 184], type: 'point'},
    {coords: [344, 208], type: 'point'},
    {coords: [344, 232], type: 'point'},
    {coords: [344, 256], type: 'point'},
    {coords: [344, 280], type: 'point'},
    {coords: [344, 304], type: 'point'},
    {coords: [344, 328], type: 'point'},
    {coords: [344, 352], type: 'point'},
    {coords: [344, 376], type: 'point'},
    {coords: [320, 376], type: 'point'},
    {coords: [296, 376], type: 'bigPoint'},
    {coords: [272, 376], type: 'point'},
    {coords: [248, 376], type: 'point'},
    {coords: [224, 376], type: 'point'},
    {coords: [200, 376], type: 'point'},
    {coords: [176, 376], type: 'point'},
    {coords: [152, 376], type: 'point'},
    {coords: [128, 376], type: 'point'},
    {coords: [152, 400], type: 'point'},
    {coords: [152, 424], type: 'point'},
    {coords: [176, 424], type: 'point'},
    {coords: [200, 424], type: 'point'},
    {coords: [200, 448], type: 'point'},
    {coords: [248, 448], type: 'point'},
    {coords: [248, 424], type: 'point'},
    {coords: [272, 424], type: 'point'},
    {coords: [296, 424], type: 'point'},
    {coords: [296, 400], type: 'point'},
    {coords: [342, 400], type: 'point'},
    {coords: [342, 424], type: 'point'},
    {coords: [396, 332], type: 'point'},
    {coords: [372, 332], type: 'point'},
    {coords: [318, 332], type: 'point'},
    {coords: [296, 332], type: 'point'},
    {coords: [270, 332], type: 'point'},
    {coords: [246, 332], type: 'point'},
    {coords: [246, 356], type: 'point'},
    {coords: [200, 350], type: 'bigPoint'},
    {coords: [200, 328], type: 'point'},
    {coords: [176, 328], type: 'point'},
    {coords: [152, 328], type: 'point'},
    {coords: [128, 328], type: 'point'},
    {coords: [152, 304], type: 'point'},
    {coords: [152, 280], type: 'point'},
    {coords: [152, 256], type: 'point'},
    {coords: [152, 232], type: 'point'},
    {coords: [152, 208], type: 'point'},
    {coords: [152, 184], type: 'point'},
    {coords: [176, 184], type: 'point'},
    {coords: [200, 184], type: 'point'},
    {coords: [224, 184], type: 'bigPoint'},
    {coords: [248, 184], type: 'point'},
    {coords: [272, 184], type: 'point'},
    {coords: [296, 184], type: 'point'},
    {coords: [296, 208], type: 'point'},
    {coords: [296, 232], type: 'point'},
    {coords: [296, 256], type: 'point'},
    {coords: [296, 280], type: 'point'},
    {coords: [296, 304], type: 'point'},
    {coords: [272, 280], type: 'point'},
    {coords: [248, 280], type: 'point'},
    {coords: [224, 280], type: 'point'},
    {coords: [200, 280], type: 'point'},
    {coords: [176, 280], type: 'point'},
    {coords: [200, 56], type: 'point'},
    {coords: [248, 56], type: 'point'},
    {coords: [248, 24], type: 'bigPoint'},
    {coords: [272, 24], type: 'point'},
    {coords: [296, 24], type: 'point'},
    {coords: [320, 24], type: 'point'},
    {coords: [348, 24], type: 'point'},
    {coords: [372, 24], type: 'point'},
    {coords: [348, 56], type: 'point'},
    {coords: [396, 24], type: 'point'},
    {coords: [424, 24], type: 'point'},
    {coords: [424, 56], type: 'point'},
    {coords: [424, 112], type: 'point'},
    {coords: [424, 136], type: 'point'},
    {coords: [400, 136], type: 'point'},
    {coords: [376, 136], type: 'point'},
    {coords: [296, 110], type: 'point'},
    {coords: [296, 134], type: 'point'},
    {coords: [272, 134], type: 'point'},
    {coords: [248, 134], type: 'point'},
    {coords: [248, 156], type: 'point'},
    {coords: [150, 110], type: 'point'},
    {coords: [150, 134], type: 'point'},
    {coords: [174, 134], type: 'bigPoint'},
    {coords: [198, 134], type: 'point'},
    {coords: [198, 158], type: 'point'},
    {coords: [128, 230], type: 'point'},
    {coords: [320, 230], type: 'point'},
];
export class Board {
    private blockSize: number = 20;
    private bgCanvas: HTMLCanvasElement;
    bgCtx: CanvasRenderingContext2D;
    private points: HTMLCanvasElement;
    private canvas: HTMLCanvasElement;
    ctx: CanvasRenderingContext2D;
    pointsCtx: CanvasRenderingContext2D;

    constructor() {
        this.canvas = document.getElementById('board') as HTMLCanvasElement;
        this.ctx = this.canvas.getContext('2d') as CanvasRenderingContext2D;
        this.bgCanvas = document.getElementById('bg') as HTMLCanvasElement;
        this.bgCtx = this.bgCanvas.getContext('2d') as CanvasRenderingContext2D;
        this.points = document.getElementById('points') as HTMLCanvasElement;
        this.pointsCtx = this.points.getContext('2d') as CanvasRenderingContext2D;
    }

    createBoard = async () => {
        this.initializeBoardSize();
        await this.addBackGround('board_close.png');
        // await this.createBoard();
    };
    initializeBoardSize = () => {
        this.canvas.height = 496;
        this.canvas.width = 448;
        this.bgCanvas.height = 496;
        this.bgCanvas.width = 448;
        this.points.width = 448;
        this.points.height = 496;
    };

    addBackGround = (fileName: string) => {
        return new Promise((resolve) => {
            const backGroundClose = new Image();
            backGroundClose.src = './assets/' + fileName;
            backGroundClose.onload = () => {
                this.bgCtx.drawImage(backGroundClose, 0, 0);
                resolve('loaded');
            };
        });
    };

    createPoints = async () => {
        return new Promise((resolve) => {
            this.pointsCtx.fillStyle = 'rgba(255,255,224,1)';
            for (let i = 0; i < points.length; i++) {
                this.pointsCtx.beginPath();
                if (points[i].type == 'bigPoint') {
                    this.pointsCtx.arc(
                        points[i].coords[0],
                        points[i].coords[1],
                        8,
                        0,
                        Math.PI * 2,
                    );
                    this.pointsCtx.fill();
                    this.pointsCtx.stroke();
                } else {
                    this.pointsCtx.arc(
                        points[i].coords[0],
                        points[i].coords[1],
                        5,
                        0,
                        Math.PI * 2,
                    );
                    this.pointsCtx.fill();
                    this.pointsCtx.stroke();
                }
            }
            resolve('done');
        });
    };
}
